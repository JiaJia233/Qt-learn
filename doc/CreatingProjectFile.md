#创建项目文件
项目文件（.pro文件）包含qmake构建应用程序，库库文件或插件所需的所有信息。通常，你使用一系列声明来指定项目中的资源，但支持简单的编程结构使你能够为不同的平台和环境描述不同的构建过程。

##项目文件元素
qmake使用的项目文件格式可以用来支持简单和相当复杂的构建系统。简单的项目文件使用简单的声明式样式，定义标准变量以指示项目中使用的源文件和头文件。复杂的项目可能会使用控制流结构来优化构建过程。

以下各节介绍项目文件中使用的不同类型的元素。

###变量
在项目文件中，变量用于保存字符串列表。在简单的项目中，qmake通过这些变量来获得项目配置，以及项目构建过程中所涉及的文件名和路径。

qmake通过项目中某些变量所包含的信息来决定要写入到Makefile中的内容。例如，HEADERS和SOURCES变量所包含的内容，用于告知qmake与项目文件位于同一目录中的头文件和源文件。

变量也可以在内部用于存储临时值列表，现有的值列表可以用新值覆盖或扩展。

以下片段说明如何将值列表赋值给变量：
```
HEADERS = mainwindow.h paintwidget.h
```
变量中的值列表按以下方式扩展：
```
SOURCES = main.cpp mainwindow.cpp \
          paintwidget.cpp
CONFIG + =console
```
注：第一个赋值仅包含与HEADERS变量在同一行中指定的值。第二个赋值SOURCES通过使用反斜线（\）分隔变量中的值。
 
在CONFIG变量是qmake的生成生成文件时使用另一个特殊的变量。它在“ 常规配置”中讨论。在上面的代码片段中，将console添加到包含的现有值列表中CONFIG。

下表列出了一些常用的变量并描述了它们的内容。有关变量及其说明的完整列表，请参阅[变量](Variables.md)。

|变量 | 内容
| - |:-:|:-:|
|CONFIG|  一般项目配置选项.
|DESTDIR| 将放置可执行文件或二进制文件的目录.
|FORMS|  用户界面编译器（uic）处理的UI文件列表.
|HEADERS| 构建项目时使用的头文件（.h）文件的列表.
|QT|  项目中使用的Qt模块列表.
|RESOURCES|  最终项目中包含的资源（.qrc）文件列表有关这些文件的更多信息，请参阅Qt资源系统.
|SOURCES|  构建项目时要使用的源代码文件列表.
|TEMPLATE|  用于该项目的模板这决定了构建过程的输出是应用程序，库还是插件.

变量的内容可以通过将变量名加上前缀来读取$$。这可以用来将一个变量的内容分配给另一个变量

```.pro
TEMP_SOURCES = $$ SOURCES
```

该$$运算符广泛地用于对字符串和值列表进行操作的内置函数。有关更多信息，请参阅[qmake语言](qmakeLanguage.md)。

空白
通常，空格分隔变量赋值中的值。要指定包含空格的值，必须用双引号将值括起来：

DEST =“程序文件”= “程序文件” 
引用的文本被视为变量所保存的值列表中的单个项目。类似的方法用于处理包含空格的路径，特别是在为Windows平台定义INCLUDEPATH和LIBS变量时：

win32：INCLUDEPATH + =“C：/ mylibs / extra headers”：INCLUDEPATH + = “C：/ mylibs / extra headers” 
unix：INCLUDEPATH + =“/ home / user / extra headers”：INCLUDEPATH + = “/ home / user / extra headers” 
注释
你可以将注释添加到项目文件。评论从#字符开始并继续到同一行的结尾。例如：

＃评论通常从一行开始，但是他们
＃也可以跟随同一行上的其他内容。
要将#字符包含在变量赋值中，有必要使用内置的LITERAL_HASH变量的内容。

内置的功能和控制流程
qmake提供了许多内置的函数来使变量的内容得到处理。简单项目文件中最常用的函数是include（）函数，它将文件名作为参数。给定文件的内容包含在include使用函数的地方的项目文件中。该include功能最常用于包含其他项目文件：

包括（other.pro）（其它。亲）
对条件结构的支持可通过在编程语言中表现如同语句的范围来提供if：

win32 {{
    SOURCES + = paintwidget_win.cpp+ = paintwidget_win 。CPP
}}
大括号内的分配只有在条件为真时才会进行。在这种情况下，必须设置win32 CONFIG选项。这在Windows上自动发生。开放式支架必须与条件位于同一条线上。

通过find（），unique（）和count（）等内置函数提供对通常需要循环的变量更复杂的操作。这些函数以及许多其他函数提供了操纵字符串和路径，支持用户输入以及调用外部工具的功能。有关使用函数的更多信息，请参阅qmake语言。有关所有功能及其说明的列表，请参阅替换功能和测试功能。

项目模板
该模板变量用于定义将要建成的项目类型。如果没有在项目文件中声明，qmake假定应该构建一个应用程序，并为此目的生成一个适当的Makefile（或等效文件）。

下表总结了可用项目的类型，并描述了qmake为其中每个项目生成的文件：

模板  qmake输出
应用程序（默认）    Makefile构建一个应用程序。
LIB Makefile构建一个库。
AUX Makefile没有任何内容。如果没有编译器需要被调用来创建目标，请使用它，例如因为你的项目是用解释语言编写的。
注意：此模板类型仅适用于基于Makefile的生成器。特别是，它不适用于vcxproj和Xcode生成器。

子目录 包含使用SUBDIRS变量指定的子目录的规则的Makefile 。每个子目录都必须包含自己的项目文件。
vcapp   Visual Studio项目文件来构建应用程序。
vclib   Visual Studio项目文件构建一个库。
vcsubdirs   Visual Studio解决方案文件在子目录中构建项目。
有关为使用和模板的项目编写项目文件的建议，请参阅构建常用项目类型。applib

使用subdirs模板时，qmake会生成一个Makefile来检查每个指定的子目录，处理它在其中找到的任何项目文件，然后make在新创建的Makefile上运行该平台的工具。该SUBDIRS变量用于包含要处理的所有子目录的列表。

一般配置
该CONFIG变量指定的选项，而该项目应与被配置的功能。

该项目可以建立在发布模式或调试模式下，或两者兼而有之。如果指定了调试和释放，则最后一个生效。如果你指定debug_and_release选项来构建项目的调试版本和发布版本，则qmake生成的Makefile将包含一个构建两个版本的规则。这可以通过以下方式调用：

使所有
将该build_all选项添加到CONFIG变量中会使该规则成为构建项目时的默认值。

注意：CONFIG变量中指定的每个选项也可以用作范围条件。你可以使用内置的CONFIG（）函数来测试是否存在某些配置选项。例如，以下几行显示函数作为作用域中的条件来测试是否仅使用该opengl选项：

CONFIG（opengl）{（opengl ）{ 
    消息（使用OpenGL支持构建）。（使用OpenGL 支持构建。）  
} else {} else {  
    消息（OpenGL支持不可用。）（OpenGL的支持是没有提供。） 
}}
这使得可以定义release和debug构建不同的配置。有关更多信息，请参阅使用范围。

以下选项定义了要构建的项目类型。

注意：其中一些选项仅在相关平台上使用时才生效。

选项  描述
QT  该项目是一个Qt应用程序，应该链接到Qt库。你可以使用该QT变量来控制应用程序所需的任何其他Qt模块。这个值是默认添加的，但是你可以将其删除以将qmake用于非Qt项目。
X11 该项目是一个X11应用程序或库。如果目标使用Qt，则不需要此值。
该应用程序和库项目模板为你提供更专业的配置选项微调构建过程。这些选项在Building Common Project Types中详细介绍。

例如，如果你的应用程序使用Qt库并且你想以debug模式构建它，那么你的项目文件将包含以下行：

CONFIG + = qt调试+ = qt调试
注意：你必须使用“+ =”，而不是“=”，否则qmake将无法使用Qt的配置来确定项目所需的设置。

声明Qt库
如果CONFIG变量包含该qt值，则启用qmake对Qt应用程序的支持。这使得你可以微调应用程序使用哪个Qt模块。这是通过可用于声明所需扩展模块的QT变量实现的。例如，我们可以通过以下方式启用XML和网络模块：

QT + =网络xml+ = 网络xml
注意：默认QT包含core和gui模块，因此上述声明将网络和XML模块添加到此默认列表。以下分配省略了默认模块，并且会在编译应用程序的源代码时导致错误：

QT = network xml＃这将省略核心和gui模块。
如果你想建立一个项目没有的gui模块，你需要与排除“ - =”操作符。默认情况下，QT包含两个core和gui，因此下面的行将导致构建一个最小的Qt项目：

QT  -  = gui＃只使用核心模块。
有关可以添加到QT变量的Qt模块的列表，请参阅QT。

配置功能
可以使用功能（.prf）文件中指定的额外配置功能来设置qmake。这些额外的功能通常为构建过程中使用的自定义工具提供支持。要将特征添加到构建过程，请将特征名称（特征文件名的词干）附加到CONFIG变量。

例如，qmake可以配置构建过程以利用pkg-config支持的外部库（如D-Bus和ogg库），其中包含以下几行：

CONFIG + = link_pkgconfig+ = link_pkgconfig
PKGCONFIG + = ogg dbus-1+ = ogg dbus - 1
有关添加功能的更多信息，请参阅添加新的配置功能。

声明其他库
如果除了使用Qt提供的库之外，还要在项目中使用其他库，则需要在项目文件中指定它们。

qmake搜索库的路径以及要链接的特定库可以添加到LIBS变量中的值列表中。你可以指定库的路径或使用Unix风格的表示法来指定库和路径。

例如，以下几行显示了如何指定一个库：

LIBS + = -L / usr / local / lib -lmath+ = - L / usr / local / lib - lmath 
包含头文件的路径也可以使用INCLUDEPATH变量以类似的方式指定。

例如，要添加多个要搜索头文件的路径：

INCLUDEPATH = c：/ msdev / include d：/ stl / include= c ：/ msdev / include d ：/ stl / include